import React, { useRef } from 'react';
import { gsap } from 'gsap';
import { useGSAP } from '@gsap/react';
import { SplitText } from 'gsap/SplitText';
import { ScrollTrigger } from 'gsap/ScrollTrigger';

import styles from './CubeSvg.module.css';

gsap.registerPlugin(useGSAP, SplitText, ScrollTrigger);

export default function CubeSvg() {
  const containerRef = useRef();
  const svgRef = useRef();

  useGSAP(() => {
    if (!containerRef.current || !svgRef.current) return;

    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: containerRef.current,
        // markers: true,
        start: 'top bottom',
        scrub: 0.8,
        end: 'bottom top',
        toggleActions: 'play none none reverse',
      },
    });

    tl.to(svgRef.current, {
      scale: 12,
      y: -800,
      x: 800,
      rotateX: 2100,
      duration: 3.8,
    });

    return () => {
      tl.kill();
    };
  }, []);
  return (
    <div className={styles.Container} ref={containerRef}>
      <svg
        ref={svgRef}
        width="1205"
        height="813"
        viewBox="0 0 1205 813"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M289.105 639.513C300.948 666.413 346.642 672.399 424.848 657.412C495.909 643.819 585.135 614.199 676.12 574.058C767.106 533.918 849.061 487.929 907.029 444.633C970.827 396.91 997.178 359.14 985.303 332.273C977.638 314.862 955.833 306.248 920.117 306.367C898.511 306.774 876.98 309.031 855.759 313.113L855.529 312.852L855.041 313.278C853.214 313.611 851.419 313.878 849.56 314.276C778.499 327.901 689.274 357.521 598.451 397.662C507.629 437.802 425.478 483.758 367.509 527.054C303.582 574.908 277.23 612.613 289.105 639.513ZM607.401 418.595C679.74 386.713 750.86 361.594 812.056 346.075C757.531 384.2 684.468 424.216 603.491 459.915C538.185 488.772 470.688 512.385 401.637 530.532C456.588 492.764 528.542 453.34 607.401 418.595ZM357.838 563.887C432.226 549.532 527.454 518.52 612.832 480.815C716.336 435.147 807.671 382.205 864.907 334.797C902.627 328.532 956.743 324.433 964.276 341.453C972.599 360.332 923.543 403.631 893.224 426.328C836.623 468.64 756.167 513.676 666.746 553.159C577.325 592.641 489.829 621.668 420.399 634.994C397.918 639.419 375.097 641.899 352.19 642.405C331.198 642.475 313.884 639.267 309.708 630.301C303.62 615.791 331.143 586.8 357.968 563.886L357.838 563.887Z"
          fill="#1E2CFB"
        />
        <path
          d="M10.2615 573.637L80.1815 732.134C106.04 790.74 189.187 818.602 314.444 810.815C435.821 803.237 583.797 763.29 731.07 698.335C878.343 633.381 1007.75 550.943 1095.06 466.364C1185.22 379.166 1220.66 298.9 1194.81 240.36L1124.89 81.8301C1101.88 29.4099 1032.63 1.50099 928.51 1.84807C916.336 1.88865 903.707 2.32217 890.623 3.14832C769.246 10.7264 621.27 50.6738 473.997 115.661C326.724 180.648 197.313 263.02 110.008 347.567C19.8421 434.798 -15.564 515.096 10.2615 573.637ZM1173.93 249.559C1195.32 298.007 1160.77 371.063 1079.19 450.015C993.638 532.731 866.733 613.497 721.87 677.4C577.006 741.303 431.8 780.622 312.999 787.996C300.512 788.82 288.481 789.186 276.905 789.224C183.351 789.536 120.11 766.042 101.053 722.902C79.6959 674.454 114.213 601.397 195.83 522.445C281.348 439.697 408.253 358.899 553.117 294.995C697.98 231.092 843.186 191.839 961.988 184.4C1075.31 177.338 1152.54 201.079 1173.93 249.559ZM125.878 363.916C211.429 281.201 338.333 200.435 483.197 136.531C628.06 72.6283 773.266 33.2769 892.068 25.903C1005.39 19.0039 1082.62 42.582 1103.98 91.0623L1147.98 190.758C1112.99 170.56 1062.31 160.132 998.429 160.345C986.266 160.385 973.648 160.786 960.575 161.612C839.165 169.158 691.189 209.138 543.916 274.093C396.643 339.047 267.233 421.42 179.96 505.999C120.998 563.062 85.4397 617.177 75.1284 664.035L31.0352 564.405C9.74318 515.957 44.293 442.803 125.878 363.948L125.878 363.916Z"
          fill="#1E2CFB"
        />
        <path
          d="M100.975 722.405C120.05 765.508 183.351 788.982 276.995 788.67C288.582 788.632 300.624 788.266 313.123 787.442C432.038 780.074 577.352 740.951 722.386 676.938C867.421 612.925 994.416 532.39 1080.05 449.745C1161.71 370.859 1196.3 297.864 1174.89 249.458C1153.48 201.052 1076.17 177.299 962.737 184.356C843.822 191.789 698.508 230.847 553.474 294.86C408.439 358.872 281.444 439.44 195.844 522.118C114.148 600.873 79.5969 673.868 100.975 722.405ZM368.169 527.571C426.124 484.373 508.224 438.521 599.058 398.472C689.892 358.423 779.195 328.869 850.109 315.275C851.968 314.878 853.762 314.612 855.589 314.28L856.077 313.855L856.307 314.114C877.523 310.042 899.049 307.79 920.65 307.384C956.325 307.265 978.158 315.891 985.821 333.23C997.693 360.036 971.347 397.72 907.564 445.335C849.609 488.533 767.509 534.384 676.708 574.466C585.906 614.548 496.539 644.069 425.494 657.631C347.208 672.585 301.492 666.613 289.783 639.774C278.073 612.935 304.386 575.121 368.168 527.44L368.169 527.571Z"
          fill="#F2CFFF"
        />
        <path
          d="M358.775 564.803C433.16 550.418 528.383 519.34 613.756 481.553C717.254 435.787 808.584 382.731 865.817 335.221C903.535 328.943 957.648 324.836 965.181 341.893C973.503 360.812 924.45 404.204 894.133 426.951C837.536 469.354 757.083 514.487 667.668 554.054C578.252 593.621 490.76 622.71 421.334 636.064C398.854 640.499 376.035 642.984 353.129 643.491C332.138 643.56 314.825 640.346 310.649 631.361C304.43 616.819 331.952 587.766 358.775 564.803Z"
          fill="#1E2CFB"
        />
        <path
          d="M125.117 363.191C210.782 280.405 337.857 199.6 482.914 135.667C627.971 71.7336 773.372 32.396 892.332 24.9857C1005.81 18.083 1083.14 41.672 1104.53 90.1749L1148.58 189.917C1113.54 169.71 1062.8 159.277 998.835 159.49C986.656 159.531 974.021 159.932 960.93 160.758C839.358 168.34 691.184 208.307 543.714 273.325C396.245 338.343 266.661 420.722 179.271 505.341C120.23 562.398 84.6239 616.571 74.2988 663.451L30.1469 563.742C8.82646 515.272 43.4228 442.083 125.117 363.191Z"
          fill="#1E2CFB"
        />
      </svg>
    </div>
  );
}
